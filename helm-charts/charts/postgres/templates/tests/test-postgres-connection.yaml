apiVersion: v1
kind: Pod
metadata:
  name: bank-platform-postgres-test-fixed
spec:
  restartPolicy: Never
  containers:
  - name: test
    image: busybox:1.35
    command:
    - sh
    - -c
    - |
      echo "Testing PostgreSQL connection..."
      sleep 10  # Даем время PostgreSQL на запуск
      if nc -z -w 5 bank-platform-postgres 5432; then
        echo "✅ PostgreSQL is accessible"
        exit 0
      else
        echo "❌ Cannot connect to PostgreSQL"
        exit 1
      fi